---
import BaseLayout from './BaseLayout.astro'
import Sidebar from '@/components/docs/Sidebar.astro'
import TableOfContents from '@/components/docs/TableOfContents.astro'
import DocsBreadcrumb from '@/components/docs/DocsBreadcrumb.astro'
import DocsSearch from '@/components/docs/DocsSearch'

interface Props {
  title: string
  description?: string
  headings: { depth: number; slug: string; text: string }[]
  slug: string
}

const { title, description, headings, slug } = Astro.props
---

<BaseLayout title={title} description={description}>
  <div class="max-w-[88rem] mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex gap-8 py-8">
      <!-- Sidebar -->
      <aside class="hidden lg:block w-60 shrink-0">
        <div class="sticky top-20">
          <div class="mb-4">
            <DocsSearch client:load />
          </div>
          <Sidebar currentSlug={slug} />
        </div>
      </aside>

      <!-- Main content -->
      <article
        class="flex-1 min-w-0 prose max-w-none"
        data-pagefind-body
      >
        <DocsBreadcrumb slug={slug} />
        <slot />
      </article>

      <!-- TOC -->
      {headings.length > 1 && (
        <aside class="hidden xl:block w-52 shrink-0">
          <div class="sticky top-20">
            <TableOfContents headings={headings} />
          </div>
        </aside>
      )}
    </div>
  </div>
</BaseLayout>
